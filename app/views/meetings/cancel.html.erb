<h1 class="text-2xl font-bold mb-4">Cancel Meeting: <%= @meeting.title %></h1>

<div class="bg-white shadow p-6 rounded">
  <div class="mb-6">
    <h2 class="text-lg font-semibold mb-2">Meeting Details</h2>
    <p><strong>Date:</strong> <%= @meeting.start_time.strftime('%B %d, %Y at %I:%M %p') %></p>
    <p><strong>Duration:</strong> <%= @meeting.duration %> minutes</p>
    <p><strong>Consultant:</strong> <%= @meeting.consultant.email %></p>
  </div>

  <%= form_with model: @meeting, url: cancel_meeting_path(@meeting), method: :patch, local: true do |f| %>
    <% if @meeting.errors.any? %>
      <div class="bg-red-100 text-red-700 p-4 rounded mb-4">
        <h2 class="text-lg font-semibold mb-2"><%= pluralize(@meeting.errors.count, "error") %> prohibited this meeting from being cancelled:</h2>
        <ul class="list-disc list-inside">
          <% @meeting.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-4">
      <%= f.label :cancellation_reason, "Reason for Cancellation", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= f.text_area :cancellation_reason, rows: 4, required: true, class: "w-full border rounded p-2", placeholder: "Please provide a reason for cancelling this meeting..." %>
    </div>

    <div class="flex gap-4">
      <%= f.submit "Confirm Cancellation", class: "bg-red-600 hover:bg-red-700 text-white font-semibold px-4 py-2 rounded" %>
      <%= link_to "Back", @meeting, class: "bg-gray-500 hover:bg-gray-600 text-white font-semibold px-4 py-2 rounded" %>
    </div>
  <% end %>
</div>